<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="blip blop">
    <title>PowerSocket Webapplication</title>

    <!-- Pure CSS -->
    <link href="css/pure-min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/side-menu.css" rel="stylesheet">

</head>

<body>
    <div id="layout">
        <!-- Menu toggle -->
        <a href="#menu" id="menuLink" class="menu-link">
            <span></span>
        </a>

        <div id="menu">
            <div class="pure-menu">
                <a class="pure-menu-heading" href="#">Stuff..</a>

                <ul class="pure-menu-list">
                        <li class="pure-menu-item">
                            <a class="pure-menu-link" href="index.shtml">Dashboard</a>
                        </li>
                        <li class="pure-menu-item">
                            <a class="pure-menu-link" href="ota.shtml">OTA Upgrade</a>
                        </li>
                        <li class="pure-menu-item">
                            <a class="pure-menu-link" href="reboot.shtml">Restart</a>
                        </li>
                        <li class="pure-menu-item">
                            <a class="pure-menu-link" href="settings.shtml">Settings</a>
                        </li>
                        <li class="pure-menu-item">
                            <a class="pure-menu-link" href="status.shtml">Status</a>
                        </li>
                        <li class="pure-menu-item">
                            <a class="pure-menu-link" href="sockets.shtml">Sockets</a>
                        </li>
                        <li class="pure-menu-item">
                            <a class="pure-menu-link" href="calibrations.shtml">Calibrations</a>
                        </li>

                    </ul>
                </div>
            </div>
<style>
.fileUpload {
position: relative;
overflow: hidden;
margin: 10px;
}

.fileUpload input.upload {
position: absolute;
top: 0;
right: 0;
margin: 0;
padding: 0;
font-size: 20px;
cursor: pointer;
opacity: 0;
filter: alpha(opacity=0);
}
</style>
<div id="main">
<div class="header">
<h1>OTA Upgrade!</h1>
<h2>Upload new firmware to the device and perform an upgrade Over The Air!</h2>
</div>
<div class="content">
<h2 class="content-subhead">Upload firmware</h2>
<p>
Select a firmware file you want flashed to the device.
Currently, we only supports flashing a new firmware. <br>Flashing the filesystem may be supported at a later time.
</p>

<form method="POST" id="FormOTA" enctype="multipart/form-data">
<input id="ota_upload_file" placeholder="Choose File" disabled="disabled" />
<div class="fileUpload pure-button pure-button-primary">
<span>Select File</span>
<input id="ota_upload" type="file" name="file" class="upload" />
</div>
<br>
<br>
<input type="submit" value="Upload" class="pure-button button-warning">
</form>
</div>
</div>

</div>

<script src="js/ui.js"></script>
<script src="js/jquery.min.js"></script>
<script>
document.getElementById("ota_upload").onchange = function() {
	document.getElementById("ota_upload_file").value = this.value;
};

$( document ).ready(function() {
	// POST firmware
	$('#FormOTA').submit(function(e){
		e.preventDefault();
		$.ajax({
			url:'/api/v1/post/ota_upload',
			type:'POST',
			data:$('#FormOTA').serialize(),
			success:function(){
				console.log("Success");
			}
		});
	});
});
</script>



</body>

</html>
